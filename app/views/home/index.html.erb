<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map-canvas { height: 100% }
    </style>
      <script src="//code.jquery.com/jquery-1.10.2.js"></script>
      <script src="//code.jquery.com/ui/1.11.0/jquery-ui.js"></script>
    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCV2-XJy4Sn8VxdUXJnEvIQxShqQYIPObI">
    </script>
    <script type="text/javascript">

$(document).on('click', "#foo", function () {
    console.log($("#tags").val())


        $.get("/api/movies/"+$("#tags").val(), function( data ) {
            var temp = data;
        var mapOptions = {
          center: new google.maps.LatLng(37.7577, -122.4376),
          zoom: 12
        };
        var map = new google.maps.Map(document.getElementById("map-canvas"),
            mapOptions);
        console.log(temp);
            for ( var i = 0; i < temp.length; i++ ) {
            var myLatlng = new google.maps.LatLng(temp[i][1],temp[i][0]);
            console.log(myLatlng);
              var marker = new google.maps.Marker({
                      position: myLatlng,
                            map: map,
                                  title: 'Hello World!'
                                    });
              }
              })


    });

var availableTags;
$.get("/api/movies", function( data ) {
        availableTags = data
            $( "#tags" ).autocomplete({
                    source: availableTags
                        });
                })
      function initialize() {
        $.get("/api/movies/3", function( data ) {
            var temp = data;
        var mapOptions = {
          center: new google.maps.LatLng(37.7577, -122.4376),
          zoom: 12
        };
        var map = new google.maps.Map(document.getElementById("map-canvas"),
            mapOptions);
        console.log(temp);
            for ( var i = 0; i < temp.length; i++ ) {
            var myLatlng = new google.maps.LatLng(temp[i][1],temp[i][0]);
            console.log(myLatlng);
              var marker = new google.maps.Marker({
                      position: myLatlng,
                            map: map,
                                  title: 'Hello World!'
                                    });
              }})
      }
      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </head>
  <body>
    <div class="ui-widget">
      <form>
        <label for="tags">Tags: </label>
        <input id="tags">
        <input id="foo" type="button" value="Submit" />
      </form>
      </div>
    <div id="map-canvas"/>
  </body>
</html>
